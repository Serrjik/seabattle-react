(this["webpackJsonpseabattle-react"]=this["webpackJsonpseabattle-react"]||[]).push([[0],{4:function(e,t,n){e.exports={container:"styles_container__2JT4u","main-content":"styles_main-content__2pmLT","main-actions":"styles_main-actions__ltxD6","editor-actions":"styles_editor-actions__1QfaX",action:"styles_action__3ZDz5"}},66:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);n(66);var i=n(0),c=n.n(i),r=n(46),a=n.n(r),o=n(6),l=n(3),s=n(32),d=n(4),u=n.n(d),f=n(9),h=n.n(f),j=n(1),p=function(e){var t=e.children,n=e.style,i=void 0===n?{}:n;return Object(j.jsx)("div",{className:h.a.battlefield,style:i,children:t})},b=n(26),x=Object(i.createContext)(),y=function(e){var t=e.cellSize,n=e.children,c=Object(i.useMemo)((function(){return{cellSize:t}}),[t]);return Object(j.jsx)(x.Provider,{value:c,children:n})},O=y;y.defaultProps={cellSize:32};var g=function(){return Object(i.useContext)(x)},m=n(36),v=n.n(m),w=Object(i.forwardRef)((function(e,t){var n=e.columns,c=e.rows,r=e.signed,a=e.axisX,o=e.axisY,l=e.hovered,s=e.onClick,d=g().cellSize,u=Object(i.useMemo)((function(){for(var e=[],t=0;t<c;t++){for(var i=[],r=0;r<n;r++){var a={x:r,y:t};i.push(a)}e.push(i)}return e}),[n,c]);return Object(j.jsx)("table",{ref:t,className:h.a["battlefield-table"],children:Object(j.jsx)("tbody",{children:u.map((function(e,t){return Object(j.jsx)("tr",{children:e.map((function(e,n){var i,c=null,u=null;return r&&(0===n&&(c=Object(j.jsx)("span",{className:h.a.marker,style:{left:"-".concat(d,"px")},children:a(t)})),0===t&&(u=Object(j.jsx)("span",{className:h.a.marker,style:{top:"-".concat(d,"px")},children:o(n)}))),Object(j.jsxs)("td",{className:v()((i={},Object(b.a)(i,h.a["battlefield-item"],!0),Object(b.a)(i,h.a["battlefield-item__hovered"],l),i)),style:{width:"".concat(d,"px"),height:"".concat(d,"px")},onClick:function(){s(n,t)},children:[c,u]},n)}))},t)}))})})})),_=w;w.defaultProps={columns:10,rows:10,signed:!0,axisX:function(e){return e+1},axisY:function(e){return"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042b\u042d\u042e\u042f"[e]},hovered:!1,onClick:function(){}};var k=Object(i.forwardRef)((function(e,t){var n=g().cellSize;return Object(j.jsx)("div",{ref:t,className:h.a.dock,style:{width:"".concat(10*n,"px"),height:"".concat(10*n,"px")},children:e.children})})),S=n(90),N=Object(i.forwardRef)((function(e,t){var n=e.x,c=e.y,r=e.length,a=e.direction,o=e.killed,l=e.onClick,s=g().cellSize,d=Object(i.useMemo)((function(){var e={},t=r*s+r-1,i=s;"row"===a?(e.width="".concat(t,"px"),e.height="".concat(i,"px")):(e.width="".concat(i,"px"),e.height="".concat(t,"px"));var o=n*(s+1),l=c*(s+1);return e.left="".concat(o,"px"),e.top="".concat(l,"px"),e}),[s,a,r,n,c]);return Object(j.jsx)("div",{onClick:l,ref:t,className:v()(h.a.ship,Object(b.a)({},h.a["ship-killed"],o)),style:d})})),C=N;N.defaultProps={killed:!1};var M=function(e){var t=e.id,n=e.x,i=e.y,c=e.length,r=e.direction,a=e.killed,o=e.onClick,l=Object(S.a)((function(){return{type:"SHIP",item:{id:t},collect:function(e){return{isDragging:e.isDragging()}}}})),d=Object(s.a)(l,2),u=d[0],f=d[1];return u.isDragging?null:Object(j.jsx)(C,{ref:f,onClick:o,killed:a,x:n,y:i,length:c,direction:r})},z=M;M.defaultProps={killed:!1,onclick:function(){}};var A=n(91),P=function(e){var t=e.ships,n=e.onPlace,c=e.onDock,r=e.onRotate,a=Object(i.useMemo)((function(){return t.filter((function(e){return!e.placed}))}),[t]),o=Object(i.useMemo)((function(){return t.filter((function(e){return e.placed}))}),[t]),d=g().cellSize,u=Object(i.useRef)(),f=Object(A.a)((function(){return{accept:"SHIP",drop:function(e){c(e.id)}}})),b=Object(s.a)(f,2)[1],x=Object(A.a)((function(){return{accept:"SHIP",drop:function(e,t){var i=t.getInitialClientOffset(),c=t.getClientOffset(),r=t.getInitialSourceClientOffset(),a=i.x-r.x,o=i.y-r.y,l=u.current.getBoundingClientRect(),s=Math.floor((c.x-l.left-a+d/2)/d),f=Math.floor((c.y-l.top-o+d/2)/d);n(e.id,s,f)}}}));return(0,Object(s.a)(x,2)[1])(u),Object(j.jsxs)("div",{className:h.a["battlefield-constructor"],children:[Object(j.jsx)(k,{ref:b,children:a.map((function(e){return Object(j.jsx)(z,Object(l.a)(Object(l.a)({},e),{},{onClick:function(){return r(e.id)}}),e.id)}))}),Object(j.jsxs)(p,{children:[Object(j.jsx)(_,{ref:u}),o.map((function(e){return Object(j.jsx)(z,Object(l.a)(Object(l.a)({},e),{},{onClick:function(t){return r(e.id,t.clientX,t.clientY,d)}}),e.id)}))]})]})},X=function(e){var t,n=e.x,c=e.y,r=e.status,a=g().cellSize,o=Object(i.useMemo)((function(){var e={width:"".concat(a,"px"),height:"".concat(a,"px")},t=n*(a+1),i=c*(a+1);return e.left="".concat(t,"px"),e.top="".concat(i,"px"),e}),[a,n,c]);return Object(j.jsx)("div",{style:o,className:v()((t={},Object(b.a)(t,h.a.shot,!0),Object(b.a)(t,h.a["shot-missed"],"missed"===r),Object(b.a)(t,h.a["shot-hitted"],"hitted"===r),t))})},E=n(12),R=n(30),I=n(44),T=n(17),W=function(e,t){return 0<=e&&e<10&&0<=t&&t<10},D=function(e){var t,n=Array(10).fill().map((function(){return Array(10).fill(0)})),i=Object(T.a)(e);try{for(i.s();!(t=i.n()).done;){for(var c=t.value,r=c.direction,a=c.length,o="row"===r,l="column"===r,s=0;s<a;s++){var d=c.x+s*o,u=c.y+s*l;if(!W(d,u)||n[u][d])return!1}if("row"===r)for(var f=c.y-1;f<=c.y+1;f++)for(var h=c.x-1;h<=c.x+a;h++)W(h,f)&&(n[f][h]=1);else for(var j=c.y-1;j<=c.y+a;j++)for(var p=c.x-1;p<=c.x+1;p++)W(p,j)&&(n[j][p]=1)}}catch(b){i.e(b)}finally{i.f()}return!0},Y=function(){for(var e=[{id:1,x:0,y:0,length:4,direction:"row",placed:!1},{id:2,x:0,y:2,length:3,direction:"row",placed:!1},{id:3,x:4,y:2,length:3,direction:"row",placed:!1},{id:4,x:0,y:4,length:2,direction:"row",placed:!1},{id:5,x:3,y:4,length:2,direction:"row",placed:!1},{id:6,x:6,y:4,length:2,direction:"row",placed:!1},{id:7,x:0,y:6,length:1,direction:"row",placed:!1},{id:8,x:2,y:6,length:1,direction:"row",placed:!1},{id:9,x:4,y:6,length:1,direction:"row",placed:!1},{id:10,x:6,y:6,length:1,direction:"row",placed:!1}],t=0;t<1e5;t++){var n,i=Object(T.a)(e);try{for(i.s();!(n=i.n()).done;){var c=n.value;c.x=Math.floor(10*Math.random()),c.y=Math.floor(10*Math.random()),c.direction=["row","column"][Math.floor(2*Math.random())]}}catch(r){i.e(r)}finally{i.f()}if(D(e))return e}return[{id:1,x:0,y:0,length:4,direction:"row",placed:!1},{id:2,x:0,y:2,length:3,direction:"row",placed:!1},{id:3,x:4,y:2,length:3,direction:"row",placed:!1},{id:4,x:0,y:4,length:2,direction:"row",placed:!1},{id:5,x:3,y:4,length:2,direction:"row",placed:!1},{id:6,x:6,y:4,length:2,direction:"row",placed:!1},{id:7,x:0,y:6,length:1,direction:"row",placed:!1},{id:8,x:2,y:6,length:1,direction:"row",placed:!1},{id:9,x:4,y:6,length:1,direction:"row",placed:!1},{id:10,x:6,y:6,length:1,direction:"row",placed:!1}]},B=function(e,t,n,i){if(t.find((function(e){return e.x===n&&e.y===i})))return!1;var c={id:1+Math.max.apply(Math,[0].concat(Object(I.a)(t.map((function(e){return e.id}))))),x:n,y:i,status:"missed"};t.push(c);var r,a=null,o=Object(T.a)(e);try{e:for(o.s();!(r=o.n()).done;)for(var l=r.value,s="row"===l.direction,d="column"===l.direction,u=0;u<l.length;u++){var f=l.x+s*u,h=l.y+d*u;if(c.x===f&&c.y===h){c.status="hitted",a=l;break e}}}catch(O){o.e(O)}finally{o.f()}if("hitted"===c.status){for(var j=[],p="row"===a.direction,b="column"===a.direction,x=function(e){var n=a.x+p*e,i=a.y+b*e,c=t.find((function(e){return e.x===n&&e.y===i}));c&&j.push(c)},y=0;y<a.length;y++)x(y);j.length===a.length&&(a.killed=!0)}return c},H=function(e,t){var n,i=[[1,0],[2,0],[3,0],[4,0]],c=function(e,t,n){[[e.y-1,e.x-1],[e.y+1,e.x-1],[e.y-1,e.x+1],[e.y+1,e.x+1]].forEach((function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1];W(i,n)&&(r[n][i]=1)}))},r=Array(10).fill().map((function(){return Array(10).fill(0)})),a=Object(T.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,l=o.x,d=o.y;r[d][l]=1}}catch(J){a.e(J)}finally{a.f()}var u,f=Object(T.a)(e);try{for(f.s();!(u=f.n()).done;){var h=u.value,j=h.direction,p=h.length;if(h.killed)if(i[h.length-1][1]++,"row"===j)for(var b=h.y-1;b<=h.y+1;b++)for(var x=h.x-1;x<=h.x+p;x++)W(x,b)&&(r[b][x]=1);else for(var y=h.y-1;y<=h.y+p;y++)for(var O=h.x-1;O<=h.x+1;O++)W(O,y)&&(r[y][O]=1);else if("row"===j)for(var g=function(e){for(var n=function(n){t.find((function(t){return t.x===n&&t.y===e}))&&c(h)},i=h.x-1;i<=h.x+p;i++)n(i)},m=h.y-1;m<=h.y+1;m++)g(m);else for(var v=function(e){for(var n=function(n){t.find((function(t){return t.x===n&&t.y===e}))&&c(h)},i=h.x-1;i<=h.x+1;i++)n(i)},w=h.y-1;w<=h.y+p;w++)v(w)}}catch(J){f.e(J)}finally{f.f()}var _=i.reduce((function(e,t){return e+t[1]}),0);if(1===(i=i.filter((function(e){return e[0]!==5-e[1]}))).length&&1!==i[0][0]){var k,S=[],N=Object(T.a)(e);try{for(N.s();!(k=N.n()).done;){var C=k.value,M=C.direction,z=C.length;if(!C.killed)if("row"===M)for(var A=function(e){for(var n=function(n){t.find((function(t){return t.x===n&&t.y===e}))&&S.push([n,e])},i=C.x-1;i<=C.x+z;i++)n(i)},P=C.y-1;P<=C.y+1;P++)A(P);else for(var X=function(e){for(var n=function(n){t.find((function(t){return t.x===n&&t.y===e}))&&S.push([n,e])},i=C.x-1;i<=C.x+1;i++)n(i)},E=C.y-1;E<=C.y+z;E++)X(E)}}catch(J){N.e(J)}finally{N.f()}if(2===i[0][0]&&(S.length>=3||S.length>=2&&8===_||1===S.length&&9===_)||3===i[0][0]&&(S.length>=3||S.length>=1&&9===_)||4===i[0][0]&&S.length>=1){var R=Array(10).fill().map((function(){return Array(10).fill(null)})),I=i[0][0]-1;S.forEach((function(e){for(var t=Object(s.a)(e,2),n=t[0],i=t[1],c=i-I;c<=i+I;c++)for(var a=n-I;a<=n+I;a++)W(a,c)&&a!==n&&c!==i&&(0===r[c][a]?R[c][a]="psbl":R[c][a]=null)}));for(var D=0;D<10;D++)for(var Y=0;Y<10;Y++)"psbl"!==R[D][Y]&&(r[D][Y]=1)}}for(var B=[],H=0;H<10;H++)for(var F=0;F<10;F++)0===r[H][F]&&B.push({x:F,y:H});return 0===B.length?"no free cells":B[Math.floor(Math.random()*B.length)]},F={playerShips:[],playerShots:[],botShips:Y().map((function(e){return Object(l.a)(Object(l.a)({},e),{},{placed:!0})})),botShots:[],playing:!0,playerWin:!0},J=Object(R.b)({name:"bot",initialState:F,reducers:{reset:function(e,t){Object.assign(e,Object(l.a)(Object(l.a)({},F),{},{botShips:Y().map((function(e){return Object(l.a)(Object(l.a)({},e),{},{placed:!0})})),playerShips:t.payload}))},shoot:function(e,t){if(e.playing){var n=B(e.botShips,e.botShots,t.payload.x,t.payload.y);if(n)if("hitted"!==n.status)for(var i=!0;i;){i=!1;var c=H(e.playerShips,e.playerShots);if("no free cells"!==c){var r=B(e.playerShips,e.playerShots,c.x,c.y);if(!r)throw Error("\u0411\u043e\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u044e\u0434\u0430 \u0441\u0442\u0440\u0435\u043b\u044f\u0442\u044c.");if("hitted"===r.status)if(i=!0,e.playerShips.every((function(e){return e.killed})))return e.playing=!1,void(e.playerWin=!1)}}else e.botShips.every((function(e){return e.killed}))&&(e.playing=!1,e.playerWin=!0)}}}}),L=J.actions,V=L.reset,K=L.shoot,U=J.reducer,Z=n(16),q=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.bot})),n=Object(E.c)((function(e){return e.main.ships})),c=Object(i.useState)(!1),r=Object(s.a)(c,2),a=r[0],o=r[1];Object(i.useEffect)((function(){e(V(n))}),[n,e]);var d=Object(i.useMemo)((function(){return t.playing?Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u0412\u0430\u0448 \u0445\u043e\u0434!"}):t.playerWin?Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u044e \u0441 \u043f\u043e\u0431\u0435\u0434\u043e\u0439!"}):Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u0423\u0432\u044b, \u0432\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438."})}),[t.playerWin,t.playing]);return Object(j.jsx)("div",{className:u.a.container,children:Object(j.jsxs)("div",{className:u.a["main-content"],children:[Object(j.jsxs)(p,{children:[Object(j.jsx)(_,{axisX:function(e){return e+1}}),t.playerShips.map((function(e){return Object(j.jsx)(C,Object(l.a)({},e),e.id)})),t.playerShots.map((function(e){return Object(j.jsx)(X,Object(l.a)({},e),e.id)}))]}),Object(j.jsxs)("div",{className:u.a["main-actions"],children:[d,Object(j.jsx)("button",{className:u.a.action,onClick:function(){return e(V(n))},children:"\u041f\u0435\u0440\u0435\u0438\u0433\u0440\u0430\u0442\u044c"}),Object(j.jsx)("button",{className:u.a.action,onClick:function(){return o((function(e){return!e}))},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u0442\u0430"}),Object(j.jsx)(Z.b,{to:"/",children:Object(j.jsx)("button",{className:u.a.action,onClick:function(){return e(V(n))},children:"\u0421\u0434\u0430\u0442\u044c\u0441\u044f"})})]}),Object(j.jsxs)(p,{children:[Object(j.jsx)(_,{hovered:!0,onClick:function(t,n){return e(K({x:t,y:n}))}}),t.botShips.filter((function(e){return e.killed||a})).map((function(e){return Object(j.jsx)(C,Object(l.a)({},e),e.id)})),t.botShots.map((function(e){return Object(j.jsx)(X,Object(l.a)({},e),e.id)}))]})]})})},Q={ships:[{id:1,x:0,y:0,length:4,direction:"row",placed:!1},{id:2,x:0,y:2,length:3,direction:"row",placed:!1},{id:3,x:4,y:2,length:3,direction:"row",placed:!1},{id:4,x:0,y:4,length:2,direction:"row",placed:!1},{id:5,x:3,y:4,length:2,direction:"row",placed:!1},{id:6,x:6,y:4,length:2,direction:"row",placed:!1},{id:7,x:0,y:6,length:1,direction:"row",placed:!1},{id:8,x:2,y:6,length:1,direction:"row",placed:!1},{id:9,x:4,y:6,length:1,direction:"row",placed:!1},{id:10,x:6,y:6,length:1,direction:"row",placed:!1}]},G=Object(R.b)({name:"editor",initialState:Q,reducers:{setShips:function(e,t){e.ships=t.payload},place:function(e,t){var n=t.payload,i=n.id,c=n.x,r=n.y,a=e.ships.filter((function(e){return e.placed&&e.id!==i})),o=e.ships.find((function(e){return e.id===i}));D([].concat(Object(I.a)(a),[Object(l.a)(Object(l.a)({},o),{},{x:c,y:r})]))&&Object.assign(o,{x:c,y:r,placed:!0})},dock:function(e,t){var n=t.payload,i=[{id:1,x:0,y:0,length:4,direction:"row",placed:!1},{id:2,x:0,y:2,length:3,direction:"row",placed:!1},{id:3,x:4,y:2,length:3,direction:"row",placed:!1},{id:4,x:0,y:4,length:2,direction:"row",placed:!1},{id:5,x:3,y:4,length:2,direction:"row",placed:!1},{id:6,x:6,y:4,length:2,direction:"row",placed:!1},{id:7,x:0,y:6,length:1,direction:"row",placed:!1},{id:8,x:2,y:6,length:1,direction:"row",placed:!1},{id:9,x:4,y:6,length:1,direction:"row",placed:!1},{id:10,x:6,y:6,length:1,direction:"row",placed:!1}].find((function(e){return e.id===n})),c=e.ships.find((function(e){return e.id===n}));c&&i&&Object.assign(c,i)},random:function(e){e.ships=Y();var t,n=Object(T.a)(e.ships);try{for(n.s();!(t=n.n()).done;){t.value.placed=!0}}catch(i){n.e(i)}finally{n.f()}},reset:function(e){e.ships=[{id:1,x:0,y:0,length:4,direction:"row",placed:!1},{id:2,x:0,y:2,length:3,direction:"row",placed:!1},{id:3,x:4,y:2,length:3,direction:"row",placed:!1},{id:4,x:0,y:4,length:2,direction:"row",placed:!1},{id:5,x:3,y:4,length:2,direction:"row",placed:!1},{id:6,x:6,y:4,length:2,direction:"row",placed:!1},{id:7,x:0,y:6,length:1,direction:"row",placed:!1},{id:8,x:2,y:6,length:1,direction:"row",placed:!1},{id:9,x:4,y:6,length:1,direction:"row",placed:!1},{id:10,x:6,y:6,length:1,direction:"row",placed:!1}]},rotate:function(e,t){var n=t.payload,i=n.id,c=n.mouseX,r=n.mouseY,a=n.cellSize,o=e.ships.find((function(e){return e.id===i}));if(o&&1!==o.length)if(o.placed){var s=document.querySelector("[class^=styles_ship]:nth-child(".concat(o.id+1,")")).getBoundingClientRect(),d=s.left,u=s.top,f=null,h=null,j=null;"row"===o.direction?((j=Math.floor((c-d)/a))===o.length&&j--,f=o.x+j,h=o.y-j):((j=Math.floor((r-u)/a))===o.length&&j--,f=o.x-j,h=o.y+j);var p=e.ships.filter((function(e){return e.placed&&e.id!==i}));D([].concat(Object(I.a)(p),[Object(l.a)(Object(l.a)({},o),{},{direction:"row"===o.direction?"column":"row",x:f,y:h})]))&&(o.direction="row"===o.direction?"column":"row",o.x=f,o.y=h)}else o.direction="row"===o.direction?"column":"row"}}}),$=G.actions,ee=$.place,te=$.dock,ne=$.random,ie=$.reset,ce=$.rotate,re=$.setShips,ae=G.reducer,oe={ships:Y().map((function(e){return Object(l.a)(Object(l.a)({},e),{},{placed:!0})}))},le=Object(R.b)({name:"main",initialState:oe,reducers:{setShips:function(e,t){e.ships=t.payload}}}),se=le.actions.setShips,de=le.reducer,ue=function(){var e=Object(E.c)((function(e){return e.main.ships})),t=Object(E.c)((function(e){return e.editor.ships})),n=Object(E.b)(),c=Object(o.f)(),r=Object(i.useMemo)((function(){return t.every((function(e){return e.placed}))}),[t]);Object(i.useEffect)((function(){n(re(e))}),[e,n]);var a=Object(i.useCallback)((function(){n(se(t)),c.push("/")}),[n,c,t]);return Object(j.jsxs)("div",{className:u.a.container,children:[Object(j.jsx)("div",{className:u.a["battlefield-constructor"],children:Object(j.jsx)(P,{ships:t,onPlace:function(e,t,i){return n(ee({id:e,x:t,y:i}))},onDock:function(e){return n(te(e))},onRotate:function(e,t,i,c){return n(ce({id:e,mouseX:t,mouseY:i,cellSize:c}))}})}),Object(j.jsxs)("div",{className:u.a["editor-actions"],children:[Object(j.jsx)("button",{className:u.a.action,onClick:function(){return n(ie())},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}),Object(j.jsx)("button",{className:u.a.action,onClick:function(){return n(ne())},children:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u043e"}),Object(j.jsx)("button",{className:u.a.action,disabled:!r,onClick:a,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},fe=Object(R.b)({name:"party",initialState:{key:"",player1:null,ships1:[],shots1:[],player2:null,ships2:[],shots2:[],waiting:!0,playing:!1,player1Turn:!0,player1Win:!1,incorrect:!1},reducers:{reset:function(e,t){Object.assign(e,{key:"",player1:null,ships1:[],shots1:[],player2:null,ships2:[],shots2:[],waiting:!0,playing:!1,player1Turn:!0,player1Win:!1,incorrect:!1},{ships1:t.payload})},update:function(e,t){Object.assign(e,t.payload)},incorrect:function(e){e.incorrect=!0}}}),he=fe.actions,je=he.reset,pe=he.update,be=he.incorrect,xe=fe.reducer,ye=function(){var e=Object(E.c)((function(e){return e.main.ships})),t=Object(E.b)();return Object(i.useEffect)((function(){t(je(e))}),[t,e]),Object(j.jsx)("div",{className:u.a.container,children:Object(j.jsxs)("div",{className:u.a["main-content"],children:[Object(j.jsxs)(p,{children:[Object(j.jsx)(_,{axisX:function(e){return e+1}}),e.map((function(e){return Object(j.jsx)(C,Object(l.a)({},e),e.id)}))]}),Object(j.jsxs)("div",{className:u.a["main-actions"],children:[Object(j.jsx)(Z.b,{to:"/editor",children:Object(j.jsx)("button",{className:u.a.action,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(j.jsx)(Z.b,{to:"/bot",children:Object(j.jsx)("button",{className:u.a.action,children:"\u0418\u0433\u0440\u0430\u0442\u044c \u0441 \u0431\u043e\u0442\u043e\u043c"})}),Object(j.jsx)(Z.b,{to:"/party",children:Object(j.jsx)("button",{className:u.a.action,children:"\u0418\u0433\u0440\u0430\u0442\u044c \u043e\u043d\u043b\u0430\u0439\u043d"})}),Object(j.jsx)(Z.b,{to:"/challenge",children:Object(j.jsx)("button",{className:u.a.action,children:"\u0411\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u044b\u0437\u043e\u0432"})})]}),Object(j.jsx)(p,{children:Object(j.jsx)(_,{})})]})})},Oe=n(63),ge=Object(R.a)({reducer:{bot:U,editor:ae,main:de,party:xe}}),me=ge,ve=ge.dispatch,we=Object(Oe.a)();we.on("party.update",(function(e){return ve(pe(e))})),we.on("party.incorrect",(function(){return ve(be())}));var _e=function(e,t){return we.emit("party.challenge",e,t)},ke=function(e){var t=e.challenge,n=Object(E.b)(),c=Object(o.f)(),r=Object(o.g)().key,a=Object(E.c)((function(e){return e.party})),s=Object(E.c)((function(e){return e.main.ships}));Object(i.useEffect)((function(){var e;t?_e(s,r):(e=s,we.emit("party.find",e))}),[t,s,n,r,a.key]),Object(i.useEffect)((function(){t&&c.push({pathname:"/challenge/".concat(a.key)})}),[t,c,a.key]);var d=window.location.href,f=Object(i.useMemo)((function(){return a.waiting?t?Object(j.jsxs)("div",{style:{textAlign:"center",fontSize:"30px"},children:[Object(j.jsx)("span",{children:"\u0418\u0449\u0435\u043c \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430"}),Object(j.jsx)("p",{style:{fontSize:"14px",marginTop:"15px",userSelect:"text"},children:d})]}):Object(j.jsx)("div",{style:{textAlign:"center",fontSize:"30px"},children:Object(j.jsx)("span",{children:"\u0418\u0449\u0435\u043c \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430"})}):a.playing?a.player1Turn?Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u0412\u0430\u0448 \u0445\u043e\u0434!"}):Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u0425\u043e\u0434 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430"}):a.player1Win?Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u044e \u0441 \u043f\u043e\u0431\u0435\u0434\u043e\u0439!"}):Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u0423\u0432\u044b, \u0432\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438."})}),[t,d,a.player1Turn,a.player1Win,a.playing,a.waiting]),h=Object(i.useCallback)((function(){we.emit("party.exit"),c.push("/")}),[c]);return a.incorrect?Object(j.jsxs)("div",{className:u.a["main-actions"],style:{justifyContent:"space-evenly",alignItems:"center",minHeight:"200px"},children:[Object(j.jsx)("span",{style:{textAlign:"center",fontSize:"30px"},children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"}),Object(j.jsx)(Z.b,{to:"/",children:Object(j.jsx)("button",{className:u.a.action,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"})})]}):Object(j.jsx)("div",{className:u.a.container,children:Object(j.jsxs)("div",{className:u.a["main-content"],children:[Object(j.jsxs)(p,{children:[Object(j.jsx)(_,{axisX:function(e){return e+1}}),a.ships1.map((function(e){return Object(j.jsx)(C,Object(l.a)({},e),e.id)})),a.shots1.map((function(e){return Object(j.jsx)(X,Object(l.a)({},e),e.id)}))]}),Object(j.jsxs)("div",{className:u.a["main-actions"],children:[f,Object(j.jsx)("button",{className:u.a.action,onClick:h,children:a.waiting?"\u0412\u044b\u0439\u0442\u0438":a.playing?"\u0421\u0434\u0430\u0442\u044c\u0441\u044f":"\u0412\u044b\u0439\u0442\u0438"})]}),Object(j.jsxs)(p,{children:[Object(j.jsx)(_,{hovered:!0,onClick:function(e,t){return function(e,t){return we.emit("party.shot",e,t)}(e,t)},axisX:function(e){return e+1}}),a.ships2.map((function(e){return Object(j.jsx)(C,Object(l.a)({},e),e.id)})),a.shots2.map((function(e){return Object(j.jsx)(X,Object(l.a)({},e),e.id)}))]})]})})},Se=function(){return Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/challenge/:key",render:function(){return Object(j.jsx)(ke,{challenge:!0})}}),Object(j.jsx)(o.a,{exact:!0,path:"/challenge/",render:function(){return Object(j.jsx)(ke,{challenge:!0})}}),Object(j.jsx)(o.a,{path:"/party",component:ke}),Object(j.jsx)(o.a,{path:"/editor",component:ue}),Object(j.jsx)(o.a,{path:"/bot",component:q}),Object(j.jsx)(o.a,{path:"/",component:ye})]})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),c(e),r(e),a(e)}))},Ce=n(64),Me=n(89);a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(E.a,{store:me,children:Object(j.jsx)(Z.a,{children:Object(j.jsx)(Me.a,{backend:Ce.a,children:Object(j.jsx)(O,{cellSize:30,children:Object(j.jsx)(Se,{})})})})})}),document.getElementById("root")),Ne()},9:function(e,t,n){e.exports={battlefield:"styles_battlefield__A2NY1","battlefield-table":"styles_battlefield-table__32pXh","battlefield-item":"styles_battlefield-item__3kMIM","battlefield-item__hovered":"styles_battlefield-item__hovered__1OK8r","battlefield-status":"styles_battlefield-status__1Unnm",marker:"styles_marker__3tkXR",ship:"styles_ship__2vKas","ship-killed":"styles_ship-killed__18zZB",shot:"styles_shot__1uHcJ","shot-missed":"styles_shot-missed__3eUV7","shot-hitted":"styles_shot-hitted__36zV-",dock:"styles_dock__VyE9s","battlefield-constructor":"styles_battlefield-constructor__2lmeR"}}},[[84,1,2]]]);
//# sourceMappingURL=main.22cd6a76.chunk.js.map